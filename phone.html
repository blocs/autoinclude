<!-- data-include="jquery.html" -->

<script type="text/javascript">
<!-- data-include="libphonenumber-js.min.js" -->

$(function(){
  $('.phone').on('blur', function(){
    let validateTel = function (value) {
      return /^[0Ôºê]/.test(value) && libphonenumber.isValidNumber(value, 'JP');
    }
    let formatTel = function (value) {
      return new libphonenumber.AsYouType('JP').input(value);
    }
    const postdata = $(this).val();
    if (!validateTel(postdata)) {
      return
    }
    let formatted = formatTel(postdata);
    $(this).val(formatted);
  });
});
</script>
